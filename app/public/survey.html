<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <title>Survey</title>
</head>
<body>

    <div class="container">

        <div class="row">
            <h3 class="header green-text"><u>Survey Questions</u></h3>
        </div>

        <div class="row">
            <div class="col s6">
                <h5 class="header">About You</h5>
                <div class="input-field">
                    <i class="material-icons prefix">person</i>
                    <input type="text" id="name" class="autocomplete">
                    <label for="name">Name (Required)</label>
                </div>
                <div class="input-field">
                    <i class="material-icons prefix">photo</i>
                    <input type="text" id="photo-image" class="autocomplete">
                    <label for="photo-image">Link to Photo Image (Required)</label>
                </div>
            </div>            
        </div>

        <div class="row">
                <h5 class="header">Question 1</h5>
                <p>Your mind is always buzzing with unexplored ideas and plans.</p>
                <select class="browser-default" id="q1">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 2</h5>
                <p>Generally speaking, you rely more on your experience than your imagination.</p>
                <select class="browser-default" id="q2">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 3</h5>
                <p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
                <select class="browser-default" id="q3">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 4</h5>
                <p>You rarely do something just out of sheer curiosity.</p>
                <select class="browser-default" id="q4">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 5</h5>
                <p>People can rarely upset you.</p>
                <select class="browser-default" id="q5">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 6</h5>
                <p>It is often difficult for you to relate to other people’s feelings.</p>
                <select class="browser-default" id="q6">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 7</h5>
                <p>In a discussion, truth should be more important than people’s sensitivities.</p>
                <select class="browser-default" id="q7">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 8</h5>
                <p>You rarely get carried away by fantasies and ideas.</p>
                <select class="browser-default" id="q8">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 9</h5>
                <p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
                <select class="browser-default" id="q9">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <h5 class="header">Question 10</h5>
                <p>You feel more energetic after spending time with a group of people.</p>
                <select class="browser-default" id="q10">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Neither Agree nor Disagree</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>

                <br>

                <button class="btn waves-effect waves-light" type="submit" name="action" id="submit">Submit
                    <i class="material-icons right">send</i>
                </button>
        </div>
    </div>

    <!-- Modal Structure -->
  <div id="bestMatchModal" class="modal">
        <div class="modal-content">
          <h4 id="bestMatchName"></h4>
          <img id="bestMatchPhoto" height="300">
        </div>
      </div>

    <footer class="page-footer green">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <a href="/api/friends" class="white-text">API Friends List</a>
                    <br>
                    <a href="#" class="white-text">GitHub Repository</a>
                    <br><br>
                    <a href="/api/clear" class="white-text">Clear API Friends List</a>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
            Made by <a class="green-text text-lighten-3" href="http://materializecss.com">Materialize</a>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
    
    <!-- Compiled and minified Materialize JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $('.modal').modal();
        });

        $('#submit').click(function(event) {

            event.preventDefault();

            // Make sure form is filled out
            var valid = true;

            if ($("#name").val() == "" || $("#photo-image").val() == "" || $("#q1").val() == null || $("#q2").val() == null || $("#q3").val() == null || $("#q4").val() == null || $("#q5").val() == null || $("#q6").val() == null || $("#q7").val() == null || $("#q8").val() == null || $("#q9").val() == null || $("#q10").val() == null) {
                valid = false;
            }

            if (valid) {
                var newFriend = {
                name: $('#name').val().trim(),
                photo: $('#photo-image').val().trim(),
                scores: [$('#q1').val(), $('#q2').val(), $('#q3').val(), $('#q4').val(), $('#q5').val(), $('#q6').val(), $('#q7').val(), $('#q8').val(), $('#q9').val(), $('#q10').val()]
            }

            newFriend.scores = newFriend.scores.map(Number);

            console.log(newFriend);

            $.post("/api/friends", newFriend, function(data) {

                console.log("Data: ", data);

                $("#bestMatchName").text(`Say Hello to your new friend: ${data.name}!`);
                $("#bestMatchPhoto").attr("src", data.photo);
                $("#bestMatchPhoto").attr("alt", data.name);
                $("#bestMatchModal").modal("open");

                $('#name').val('');
                $('#photo-image').val('');
                $('#q1').val('');
                $('#q2').val('');
                $('#q3').val('');
                $('#q4').val('');
                $('#q5').val('');
                $('#q6').val('');
                $('#q7').val('');
                $('#q8').val('');
                $('#q9').val('');
                $('#q10').val('');

            })
            } else {
                alert("Please fill out all of the fields, then try again.");
            }

        })
    </script>

</body>
</html>